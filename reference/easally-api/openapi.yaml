openapi: 3.0.0
info:
  title: Easally API
  version: '1.0'
  description: 'Initiate an Easally accessibility test, check its status, and retrieve the results.'
  contact:
    name: Stephen Lewis
    url: 'https://www.easally.com'
    email: stephen@easally.com
  license:
    name: MIT
    url: https://github.com/easally/api-docs/blob/master/LICENSE.txt
servers:
  - url: 'http://localhost:3000'
paths:
  /tests:
    post:
      summary: Inititate a test
      description: Initiate an accessibility test.
      tags:
        - Tests
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                url:
                  type: string
                  format: uri
                  example: 'https://www.example.com/test-me'
                  description: The URL to test
              required:
                - url
      responses:
        '202':
          description: Accepted
          headers:
            Location:
              schema:
                type: string
              description: 'The location of the new "queued test" resource'
              required: true
        '409':
          description: Conflict
          headers:
            Location:
              schema:
                type: string
              description: 'The location of an existing "queued test" resource'
              required: true
  '/tests/{id}':
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
        description: The ID of the test
    get:
      summary: Retrieve a completed test
      description: Retrieve the results of a completed accessibility test.
      tags:
        - Tests
      parameters:
        - schema:
            type: string
            default: application/json
          in: header
          name: Accept
          required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: './models/test-result.v1.yaml'
        '404':
          description: Not Found
  /queued-tests:
    get:
      summary: Retrieve all of the queued tests
      description: Retrieve information about all of the queued accessibility tests.
      tags:
        - Queued Tests
      responses:
        '204':
          description: No Content
  '/queued-tests/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: The ID of the queued test
    get:
      summary: Retrieve a queued test
      description: Retrieve information about a queued accessibility test.
      tags:
        - Queued Tests
      parameters:
        - schema:
            type: string
            default: application/json
          in: header
          name: Accept
          required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ./models/queued-test.v1.yaml
        '303':
          description: See Other
          headers:
            Location:
              schema:
                type: string
              description: The location of the completed test resource
              required: true
        '410':
          description: Gone
components:
  schemas: {}
